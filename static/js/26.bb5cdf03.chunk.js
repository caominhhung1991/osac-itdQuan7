(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[26],{1051:function(e,n,t){"use strict";t.r(n);var a=t(16),o=t(3),i=t(14),c=t(30),l=(t(970),t(0)),r=t.n(l),d=t(48),u=t(1046),s=t(1015),h=t(42),v=t(10),m=t(704),f=function(e){var n,t=e.shiftConfig,a=e.isInput,o=e.setIsInput,i=Object(m.b)((function(e){return e.thucDonDuTru})).tongHopOfShifts,c=t.id,l=(null===i||void 0===i||null===(n=i[c])||void 0===n?void 0:n.tongPhanAn)||0,d=t.id===a.shiftId;return r.a.createElement("div",{className:"display-4 mt-1 kind-title"},"".concat(t.name," - ").concat(Object(v.b)(l)," ph\u1ea7n"),r.a.createElement("button",{className:["btn btn-sm ml-1 mb-1",d?"btn-warning":"btn-outline-warning"].join(" "),onClick:function(){o(d?{}:{shiftId:t.id,type:"soPhanAn"})}},"Edit"))};f.defaultProps={userConfig:{}};var g=Object(d.o)(f),b=t(985),C=function(e){var n=e.rowDatas.reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.thanhTien)||0)+((null===n||void 0===n?void 0:n.thanhTien)||0);return Object(o.a)(Object(o.a)({},e),{},{soPhanAn:((null===e||void 0===e?void 0:e.soPhanAn)||0)+((null===n||void 0===n?void 0:n.soPhanAn)||0),soPhanThem:((null===e||void 0===e?void 0:e.soPhanThem)||0)+((null===n||void 0===n?void 0:n.soPhanThem)||0),thanhTien:Math.round(t)})}),{});return r.a.createElement(u.a.Summary.Row,null,r.a.createElement(u.a.Summary.Cell,{colSpan:6},r.a.createElement("div",{className:"text-center text-small font-weight-bold text-dark"},"T\u1ed5ng")),r.a.createElement(u.a.Summary.Cell,{colSpan:1},r.a.createElement("div",{className:"font-weight-bold  text-small text-danger float-right"},Object(v.a)(n.thanhTien))),r.a.createElement(u.a.Summary.Cell,{colSpan:1}))},p={soMonMan:"S\u1ed1 m\xf3n m\u1eb7n",soMonChay:"S\u1ed1 m\xf3n chay",soMonCT:"S\u1ed1 m\xf3n CT",soMonNuoc:"S\u1ed1 m\xf3n n\u01b0\u1edbc",tongPhan:"T\u1ed5ng ph\u1ea7n"},I=function(e){var n,t=e.dayTongHopData,a=e.isEditDutru,o=e.tongHopOfShifts,d=e.shiftId,s=e.customerGroup,h=(null===o||void 0===o||null===(n=o[d])||void 0===n?void 0:n.tongPhanAn)||0,m=(null===t||void 0===t?void 0:t.tongPhan)||0,f=(null===s||void 0===s?void 0:s.giaPhanAn)||0,g=h*f,b=Object(l.useState)([]),C=Object(c.a)(b,2),I=C[0],O=C[1];Object(l.useEffect)((function(){var e=[];t&&(e=(e=["soMonMan","soMonChay","soMonCT","soMonNuoc","tongPhan"].reduce((function(e,n){var a=(null===t||void 0===t?void 0:t[n])||0,o=a*f,c={loaiMon:n,soPhan:a,cost:Math.round(o/g*100*10)/10};return[].concat(Object(i.a)(e),[c])}),[])).filter((function(e){return e.soPhan>0}))),O(e)}),[t,o]);var y=[{dataIndex:"loaiMon",title:"Lo\u1ea1i m\xf3n",width:110,className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("div",{className:"font-weight-bold"},(null===p||void 0===p?void 0:p[e])||""):(null===p||void 0===p?void 0:p[e])||""}},{dataIndex:"soPhan",title:"S\u1ed1 ph\u1ea7n",className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("div",{className:"float-right font-weight-bold"},Object(v.a)(e)):r.a.createElement("div",{className:"float-right"},Object(v.a)(e))},width:70},{dataIndex:"cost",title:"Cost",width:60,className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("small",{className:"float-right font-weight-bold"},h-m):r.a.createElement("small",{className:"float-right text-danger font-weight-bold"},e,"%")}}];return a&&r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold text-center text-danger mb-2"},"T\u1ed5ng h\u1ee3p s\u1ed1 ph\u1ea7n"),r.a.createElement(u.a,{rowKey:"loaiMon",columns:y,dataSource:I,pagination:!1,scroll:{x:240}}))};I.defaultProps={isEditDutru:!0,isHide:!1,shiftDuTruData:{}};var O=I,y=t(943),M=t(314),D=t(300),T={chiPhiCoDinh:"CP c\u1ed1 \u0111\u1ecbnh",chiPhiNguyenVatLieu:"CP NVL",tongChiPhi:"T\u1ed5ng CP",doanhThu:"Doanh Thu"},E=function(e){var n=e.history,t=e.dayTongHopData,a=e.dataSource,i=e.customerGroup,l=e.shiftConfig,d=e.tongHopOfShifts,s=l.id,h=r.a.useState([]),m=Object(c.a)(h,2),f=m[0],g=m[1],b=r.a.useState(0),C=Object(c.a)(b,2),p=C[0],I=C[1],O=r.a.useState(0),E=Object(c.a)(O,2),P=E[0],j=E[1];r.a.useEffect((function(){var e,n=P+p,t=((null===i||void 0===i?void 0:i.giaPhanAn)||0)*((null===d||void 0===d||null===(e=d[s])||void 0===e?void 0:e.tongPhanAn)||0),a=[{loaiChiPhi:"chiPhiCoDinh",tien:p||"",cost:n&&p?Math.round(p/n*100*100)/100:""},{loaiChiPhi:"chiPhiNguyenVatLieu",tien:P||"",cost:P&&n?Math.round(P/n*100*100)/100:""},{loaiChiPhi:"tongChiPhi",tien:n||"",cost:n&&t?Math.round(n/t*100*100)/100:""},{loaiChiPhi:"doanhThu",tien:t||"",cost:""}];g(a)}),[p,P,i,t,d,s]),r.a.useEffect((function(){if(i&&t){var e=(null===t||void 0===t?void 0:t.tongPhan)||0,n=Object(M.b)(i,{tongPhan:e});I(n)}}),[i,t]),r.a.useEffect((function(){var e=a.reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.thanhTien)||0)+((null===n||void 0===n?void 0:n.thanhTien)||0);return Object(o.a)(Object(o.a)({},e),{},{thanhTien:Math.round(t)})}),{});j((null===e||void 0===e?void 0:e.thanhTien)||0)}),[a,d]);var N=[{dataIndex:"loaiChiPhi",title:"Lo\u1ea1i CP",width:120,className:" text-small",render:function(e){switch(e){case"chiPhiCoDinh":return r.a.createElement("div",{style:{textDecoration:"underline",color:"blue"},className:"hoverClass",onClick:function(){var e=[[y.b.MODAL_ID,y.a.openChiPhiCoDinhModal.id],[y.b.SHIFT_ID,l.id]];Object(D.d)(n,e)}},(null===T||void 0===T?void 0:T[e])||"");case"tongChiPhi":case"doanhThu":return r.a.createElement("div",{className:"font-weight-bold"},null===T||void 0===T?void 0:T[e]);default:return r.a.createElement("div",null,(null===T||void 0===T?void 0:T[e])||"")}}},{dataIndex:"tien",title:"Ti\u1ec1n",className:" text-small",render:function(e,n){return"tongChiPhi"===n.loaiChiPhi||"doanhThu"===n.loaiChiPhi?r.a.createElement("div",{className:"float-right font-weight-bold"},Object(v.a)(e)):r.a.createElement("div",{className:"float-right"},Object(v.a)(e))},width:70},{dataIndex:"cost",title:"Cost",width:60,className:" text-small",render:function(e){return e&&r.a.createElement("sub",{className:"text-danger font-weight-bold"},e,"%")}}];return r.a.createElement("div",{className:"mt-2"},r.a.createElement("div",{className:"font-weight-bold text-center text-danger mb-2"},"T\u1ed5ng h\u1ee3p chi ph\xed"),r.a.createElement(u.a,{rowKey:"loaiChiPhi",columns:N,dataSource:f,pagination:!1,scroll:{x:250}}))};E.defaultProps={isEditDutru:!0,isHide:!1,shiftDuTruData:{},dataSource:[]};var P=Object(d.o)(E),j=t(27),N=t(706),S=t(6),w=t(8),x=t(18),A=t(7),_=t.n(A),k=t(110),L=t(175),R=t(75),H=t(98),V=t(5);function K(e){return void 0!==e&&null!==e}var U=function(e){var n,t=e.itemPrefixCls,a=e.component,o=e.span,i=e.className,c=e.style,r=e.labelStyle,d=e.contentStyle,u=e.bordered,s=e.label,h=e.content,v=e.colon,m=a;return u?l.createElement(m,{className:_()((n={},Object(S.a)(n,"".concat(t,"-item-label"),K(s)),Object(S.a)(n,"".concat(t,"-item-content"),K(h)),n),i),style:c,colSpan:o},K(s)&&l.createElement("span",{style:r},s),K(h)&&l.createElement("span",{style:d},h)):l.createElement(m,{className:_()("".concat(t,"-item"),i),style:c,colSpan:o},l.createElement("div",{className:"".concat(t,"-item-container")},s&&l.createElement("span",{className:_()("".concat(t,"-item-label"),Object(S.a)({},"".concat(t,"-item-no-colon"),!v)),style:r},s),h&&l.createElement("span",{className:_()("".concat(t,"-item-content")),style:d},h)))};function G(e,n,t){var a=n.colon,o=n.prefixCls,i=n.bordered,c=t.component,r=t.type,d=t.showLabel,u=t.showContent,s=t.labelStyle,h=t.contentStyle;return e.map((function(e,n){var t=e.props,v=t.label,m=t.children,f=t.prefixCls,g=void 0===f?o:f,b=t.className,C=t.style,p=t.labelStyle,I=t.contentStyle,O=t.span,y=void 0===O?1:O,M=e.key;return"string"===typeof c?l.createElement(U,{key:"".concat(r,"-").concat(M||n),className:b,style:C,labelStyle:Object(V.a)(Object(V.a)({},s),p),contentStyle:Object(V.a)(Object(V.a)({},h),I),span:y,colon:a,component:c,itemPrefixCls:g,bordered:i,label:d?v:null,content:u?m:null}):[l.createElement(U,{key:"label-".concat(M||n),className:b,style:Object(V.a)(Object(V.a)(Object(V.a)({},s),C),p),span:1,colon:a,component:c[0],itemPrefixCls:g,bordered:i,label:v}),l.createElement(U,{key:"content-".concat(M||n),className:b,style:Object(V.a)(Object(V.a)(Object(V.a)({},h),C),I),span:2*y-1,component:c[1],itemPrefixCls:g,bordered:i,content:m})]}))}var Y=function(e){var n=l.useContext(X),t=e.prefixCls,a=e.vertical,o=e.row,i=e.index,c=e.bordered;return a?l.createElement(l.Fragment,null,l.createElement("tr",{key:"label-".concat(i),className:"".concat(t,"-row")},G(o,e,Object(V.a)({component:"th",type:"label",showLabel:!0},n))),l.createElement("tr",{key:"content-".concat(i),className:"".concat(t,"-row")},G(o,e,Object(V.a)({component:"td",type:"content",showContent:!0},n)))):l.createElement("tr",{key:i,className:"".concat(t,"-row")},G(o,e,Object(V.a)({component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},n)))},F=function(e){return e.children},B=t(39),X=l.createContext({}),z={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function W(e,n,t){var a=e;return(void 0===n||n>t)&&(a=Object(B.a)(e,{span:t}),Object(R.a)(void 0===n,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),a}function J(e){var n,t=e.prefixCls,a=e.title,o=e.extra,i=e.column,c=void 0===i?z:i,r=e.colon,d=void 0===r||r,u=e.bordered,s=e.layout,h=e.children,v=e.className,m=e.style,f=e.size,g=e.labelStyle,b=e.contentStyle,C=l.useContext(H.b),p=C.getPrefixCls,I=C.direction,O=p("descriptions",t),y=l.useState({}),M=Object(w.a)(y,2),D=M[0],T=M[1],E=function(e,n){if("number"===typeof e)return e;if("object"===Object(x.a)(e))for(var t=0;t<L.b.length;t++){var a=L.b[t];if(n[a]&&void 0!==e[a])return e[a]||z[a]}return 3}(c,D);l.useEffect((function(){var e=L.a.subscribe((function(e){"object"===Object(x.a)(c)&&T(e)}));return function(){L.a.unsubscribe(e)}}),[]);var P=function(e,n){var t=Object(k.a)(e).filter((function(e){return e})),a=[],o=[],i=n;return t.forEach((function(e,c){var l,r=null===(l=e.props)||void 0===l?void 0:l.span,d=r||1;if(c===t.length-1)return o.push(W(e,r,i)),void a.push(o);d<i?(i-=d,o.push(e)):(o.push(W(e,d,i)),a.push(o),i=n,o=[])})),a}(h,E),j=l.useMemo((function(){return{labelStyle:g,contentStyle:b}}),[g,b]);return l.createElement(X.Provider,{value:j},l.createElement("div",{className:_()(O,(n={},Object(S.a)(n,"".concat(O,"-").concat(f),f&&"default"!==f),Object(S.a)(n,"".concat(O,"-bordered"),!!u),Object(S.a)(n,"".concat(O,"-rtl"),"rtl"===I),n),v),style:m},(a||o)&&l.createElement("div",{className:"".concat(O,"-header")},a&&l.createElement("div",{className:"".concat(O,"-title")},a),o&&l.createElement("div",{className:"".concat(O,"-extra")},o)),l.createElement("div",{className:"".concat(O,"-view")},l.createElement("table",null,l.createElement("tbody",null,P.map((function(e,n){return l.createElement(Y,{key:n,index:n,colon:d,prefixCls:O,vertical:"vertical"===s,bordered:u,row:e})})))))))}J.Item=F;var q=J,Q=t(697),Z=t(698),$=t(235),ee=q.Item,ne=function(e){var n,t=e.history,a=e.location,o=e.dayTongHopData,i=e.coSoId,d=e.shiftConfig,u=e.customerGroup,s=Object(D.c)(a,y.b.MODAL_ID),h=Object(D.c)(a,y.b.SHIFT_ID),m=Object(l.useState)(!1),f=Object(c.a)(m,2),g=f[0],b=f[1];Object(l.useEffect)((function(){var e=s===y.a.openChiPhiCoDinhModal.id&&"".concat(d.id)==="".concat(h);b(!!e)}),[s,d]);var C=(null===o||void 0===o?void 0:o.tongPhan)||0,p=(null===o||void 0===o?void 0:o.chiPhiCoDinh)||0,I=((null===o||void 0===o?void 0:o.soMonMan)||0)+((null===o||void 0===o?void 0:o.soMonChay)||0);return r.a.createElement(N.a,{title:r.a.createElement("div",{className:"text-dark"},r.a.createElement("i",{className:"fa fa-sliders mr-2"}),r.a.createElement("strong",null,y.a.openChiPhiCoDinhModal.name," - ",null===j.c||void 0===j.c||null===(n=j.c[i])||void 0===n?void 0:n.name)),isOpen:g,onCancel:function(){return t.push("?")},centered:!0,width:"650px"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("strong",null,"T\u1ed5ng ph\u1ea7n: ",Object(v.a)(C),", T\u1ed5ng ph\u1ea7n c\u01a1m: ",Object(v.a)(I)," - Chi ph\xed c\u1ed1 \u0111\u1ecbnh: ",Object(v.a)(p))),r.a.createElement(q,{bordered:!0,column:1,size:"small"},$.b.map((function(e){var n=(null===u||void 0===u?void 0:u[e.id])||0,t="".concat(e.name," = ").concat(Object(v.a)(n)," x ").concat(Object(v.a)(C)," ph\u1ea7n"),a=C*n;if("gao"===e.id){var o=n,i=(null===u||void 0===u?void 0:u.dinhLuongGao)||0,c=Math.round(i/100)/10;a=(n*=c)*I,t="Gi\xe1 ".concat(e.name," x \u0110L g\u1ea1o = ").concat(Object(v.a)(o)," x ").concat(c," x ").concat(Object(v.a)(I)," ph\u1ea7n")}var l=Object(v.l)(a,p);return r.a.createElement(ee,{key:e.id,label:t,span:1},r.a.createElement(Q.a,{gutter:5},r.a.createElement(Z.a,{span:12,className:"font-weight-bold"},r.a.createElement("div",{className:"float-right"},Object(v.a)(a))),r.a.createElement(Z.a,{span:12},r.a.createElement("small",{className:"text-danger font-weight-bold"},"(",l,"%)"))))}))))};ne.defaultProps={};var te=Object(d.o)(ne),ae=t(957),oe=t(115),ie=t(304),ce=t(302),le=t(301),re=r.a.lazy((function(){return t.e(32).then(t.bind(null,1045))})),de=j.b.id;n.default=Object(d.o)((function(e){var n=e.shiftConfig,t=e.soMonMan,d=e.isInput,v=e.setIsInput,f=Object(m.a)(),p=Object(m.b)((function(e){return e.nguyenLieu})).nguyenLieus,I=Object(m.b)((function(e){return e.recipe})),y=I.recipes,D=I.ingreRecipeData,T=Object(m.b)((function(e){return e.thucDonDuTruSetting})),E=T.cauHinhDuTrus,j=T.recipeKinds,N=T.nhomGiaMonAnData,S=Object(m.b)((function(e){return e.thucDonDuTru})),w=S.isLoading,x=r.a.useMemo((function(){return new b.a}),[]),A=e.userConfig,_=e.userConfigHandle,k=A.yearId,L=A.weekId,R=A.customerId,H=A.dayId,V=n.id,K=(null===N||void 0===N?void 0:N.giaPhanAn)||0,U=r.a.useMemo((function(){return null===E||void 0===E?void 0:E[V]}),[E,V]),G=null===S||void 0===S?void 0:S["duTruDatas/".concat(V)],Y=null===S||void 0===S?void 0:S["thucDonDatas/".concat(V)],F=null===S||void 0===S?void 0:S["tongHopDuTruData/".concat(R,"/").concat(V)],B=Object(l.useState)(!1),X=Object(c.a)(B,2),z=X[0],W=X[1],J=Object(l.useState)([]),q=Object(c.a)(J,2),Q=q[0],Z=q[1];r.a.useEffect((function(){de&&R&&f(Object(ie.d)(de,R))}),[de,R]),r.a.useEffect((function(){var e=[];U&&G&&Y&&H&&p&&D&&(e=(e=oe.a.reduce((function(e,n){var t=n.id,a=null===U||void 0===U?void 0:U[n.id],o=((null===a||void 0===a?void 0:a.values)||[]).map((function(e){var n,a=null===G||void 0===G?void 0:G[e],o=null===Y||void 0===Y?void 0:Y[e],i=null===o||void 0===o?void 0:o.recipeId,c=(null===a||void 0===a?void 0:a.soPhanAn)||0,l=(null===a||void 0===a?void 0:a.soPhanThem)||0,r=c+l,d=(null===a||void 0===a?void 0:a.ghiChu)||"",u=(null===a||void 0===a?void 0:a.dieuChinh)||{},s=(null===D||void 0===D?void 0:D[i])||[],h=f(Object(le.d)({nguyenLieus:s},u,[i])),v=r*h;return{id:"".concat(e),name:(null===j||void 0===j||null===(n=j[e])||void 0===n?void 0:n.name)||e,loaiMonId:t,recipeId:i,tenMon:i,giaMon:h,thanhTien:v,ghiChu:d,soPhanThem:l,soPhanAn:c,tongPhan:r,dieuChinh:u,chiPhiNVL:v}}));return[].concat(Object(i.a)(e),Object(i.a)(o))}),[])).filter((function(e){return e.tenMon}))),Z(e)}),[U,G,Y,H,p,D]),r.a.useEffect((function(){var e=[de,k,L,"shiftIds",V,"customerIds",R,H,"kindIds"];return de&&k&&L&&V&&R&&H&&f(Object(ce.b)(e,{shiftId:V})),function(){return Object(ce.k)(V)}}),[de,k,L,V,R,H]),r.a.useEffect((function(){var e=[de,k,L,"shiftIds",V,"thucDons",H,"kindIds"];return de&&k&&L&&V&&H&&f(Object(ce.c)(e,{shiftId:V})),function(){return Object(ce.j)(V)}}),[de,k,L,V,H]),r.a.useEffect((function(){if(G&&U&&R&&N&&Q.length>0){var e=$(G,Q);f(Object(ce.p)(R,V,e))}else f(Object(ce.p)(R,V,null))}),[R,G,U,N,Q]),r.a.useEffect((function(){v({})}),[H,de,R,k,L]);var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={dayDuTruData:e,dayId:H,dayThucDonData:Y,recipeDatas:y,soMonMan:t},o=ae.a.getSoTongPhan(U,a),i=Object(M.b)(N,{tongPhan:o}),c=n.reduce((function(e,n){return e+(n.chiPhiNVL||0)}),0),l=i+c,r={soMonMan:ae.a.getSoMonMan(U,a),soMonMan_CoCanh:ae.a.getSoMonMan_CoCanh(U,a),soMonNuocChay:ae.a.getSoMonNuocChay(U,a),soMonCT_CoCom:ae.a.getSoMonCT_CoCom(U,a),soMonChay:ae.a.getSoMonChay(U,a),soMonCT:ae.a.getSoMonCT(U,a),soMonNuoc:ae.a.getSoMonNuoc(U,a),soMonCanh:ae.a.getSoMonCanh(U,a),soMonXao:ae.a.getSoMonXao(U,a),soMonTrangMieng:ae.a.getSoMonTrangMieng(U,a),tongPhan:o,chiPhiCoDinh:i,chiPhiNVL:c,tongChiPhi:l};return r},ee=function(e,n){var t,c,l,r=null===n||void 0===n?void 0:n.recipeKindId,d=null===n||void 0===n?void 0:n.type,u=[de,k,L,"shiftIds",V,"customerIds",R,H,"kindIds",r,d],s=null===G||void 0===G||null===(t=G[r])||void 0===t?void 0:t[d];switch(d){case"ghiChu":s=s||"";break;case"soPhanAn":case"soPhanThem":s=s||0;break;case"dieuChinh":var v=null===n||void 0===n?void 0:n.nguyenLieuId,m=null===n||void 0===n?void 0:n.recipeId;u=[].concat(Object(i.a)(u),[m,v]),s=(null===(c=s)||void 0===c||null===(l=c[m])||void 0===l?void 0:l[v])||0}var g=!Object(h.isEqual)(s,e),b=function(){W(!1)};if(r&&d&&g)switch(W(!0),d){case"soPhanAn":case"soPhanThem":var C=Object(o.a)({},G),p=(null===C||void 0===C?void 0:C.ghiChu)||null;p||(p=""),Object(h.set)(C,[r,d],e);var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null===e||void 0===e?void 0:e.soMonCanh)||0,t=(null===e||void 0===e?void 0:e.soMonMan_CoCanh)||0,i=(null===e||void 0===e?void 0:e.soMonNuocChay)||0,c=(null===e||void 0===e?void 0:e.soMonCT_CoCom)||0,l=(null===e||void 0===e?void 0:e.soMonXao)||0,r=(null===e||void 0===e?void 0:e.soMonTrangMieng)||0,d=n-t-i+c,u=l-i,s=[{id:oe.b.monCanhConfig.id,soPhanAn:d===1/0?0:d},{id:oe.b.monXaoConfig.id,soPhanAn:u===1/0?0:u},{id:oe.b.dessertConfig.id,soPhanAn:r===1/0?0:r}],h=s.reduce((function(e,n){var t,i,c=null===(t=U[n.id])||void 0===t||null===(i=t.values)||void 0===i?void 0:i[0],l=(null===G||void 0===G?void 0:G[c])||{},r=(null===l||void 0===l?void 0:l.ghiChu)||null;r||(r="");var d=Object(o.a)(Object(o.a)({},l),{},{ghiChu:r,soPhanAn:n.soPhanAn});return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},c,d))}),{});return h}($(C,[])),O=null===C||void 0===C?void 0:C[r],y=Object(o.a)(Object(o.a)({},I),{},Object(a.a)({},r,Object(o.a)({ghiChu:p},O))),M=[de,k,L,"shiftIds",V,"customerIds",R,H,"kindIds"];f(Object(ce.n)(M,y,b,{}));break;case"ghiChu":case"dieuChinh":f(Object(ce.h)(u,e,b,{}))}},ne=x.getDuTruItemColumns(Object(o.a)(Object(o.a)({},e),{},{dayId:H,giaPhanAn:K,customerId:R,nhomGiaMonAnDataId:null===N||void 0===N?void 0:N.id,coSoId:de,shiftId:V,isInput:d,setIsInput:v,onUpdate:ee}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row duTruItem mb-3"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(g,{userConfigHandle:_,userConfig:A,shiftConfig:n,isInput:d,setIsInput:v}),r.a.createElement("div",{className:"mb-2"},r.a.createElement(u.a,{size:"small",loading:w||z,rowKey:"id",bordered:!0,columns:ne,dataSource:Q,pagination:!1,expandAll:!0,scroll:{x:800},expandable:{expandedRowRender:function(e){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(s.a,{className:"osac-spin"})},r.a.createElement(re,{record:e,shiftId:V,isInput:d,setIsInput:v,onUpdate:ee}))}},summary:function(e){return r.a.createElement(C,{rowDatas:e})}}))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(O,{shiftId:V,dayTongHopData:F}),r.a.createElement(P,{shiftConfig:n,dayId:H,coSoId:de,customerId:R,yearId:k,weekId:L,dayTongHopData:F,dataSource:Q}))),r.a.createElement(te,{shiftConfig:n,dayTongHopData:F,dayId:H,coSoId:de}))}))},943:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return o}));var a={ID:"id",MODAL_ID:"modalId",CUSTOMER_GROUP_ID:"customerGroupId",COSO_ID:"coSoId",NHANVIEN_ID:"nhanvienId",VIEW_STATUS:"pagestatus",ADD_NHANVIEN:"addNhanVien",BAO_CAO_KIND:"baoCaoKind",REPORT_ID:"reportId",OPEN_MODAL:"openModal",CANTIN_ID:"cantinId",CUSTOMER_ID:"customerId",VIEW_KIND_ID:"viewKindId",RECIPE_ID:"recipeId",IS_MON_PHU:"isMonPhu",INGRE_ID:"ingreID",VENDOR_ID:"nhaCungCapId",KIND_ID:"kindId",DAY:"day",DAY_ID:"dayId",SHIFT:"shift",SHIFT_ID:"shiftId",BOPHAN_ID:"boPhanId",WEEK_ID:"weekId",MONTH_ID:"monthId",YEAR_ID:"yearId",KETOAN_DRAWER_ID:"keToanDrawerId",KHUVUC_ID:"khuVucId",LOAITAISAN_ID:"loaiTaiSanId",TAISAN_ID:"taiSanId"},o={editNhanvien:{id:"editNhanvien",name:"C\u1eadp nh\u1eadt Nh\xe2n Vi\xean"},addNhanvien:{id:"addNhanvien",name:"Th\xeam Nh\xe2n Vi\xean"},viewNhanvien:{id:"viewNhanvien",name:"Xem Nh\xe2n Vi\xean"},themBaoCao:{id:"themBaoCao",name:"Th\xeam b\xe1o c\xe1o"},addRecipe:{id:"addRecipe",name:"Th\xeam m\xf3n",getTitle:function(){return"Th\xeam M\xf3n M\u1edbi"}},editRecipe:{id:"editRecipe",name:"C\u1eadp nh\u1eadt m\xf3n",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},addIngre:{id:"addIngre",name:"Th\xeam Nguy\xean Li\u1ec7u",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},editIngre:{id:"editIngre",name:"Update Nguy\xean Li\u1ec7u",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},vendorModal:{id:"vendorModal",name:"Nh\xe0 Cung C\u1ea5p"},selectRecipe:{id:"selectRecipe",name:"Ch\u1ecdn",getTitle:function(e){return"Ch\u1ecdn ".concat(e)}},configCantin:{id:"configCantin",name:"Th\xf4ng tin c\u0103n tin"},addChiPhiPhatSinh:{id:"addChiPhiPhatSinh",name:"Chi Ph\xed Ph\xe1t Sinh"},openDutrus:{id:"openDutrus",name:"M\u1edf D\u1ef1 Tr\xf9"},addSoPhanAn:{id:"addSoPhanAn",name:"Th\xeam S\u1ed1 Ph\u1ea7n \u0102n"},addExtraSoPhanAn:{id:"addExtraSoPhanAn",name:"Th\xeam S\u1ed1 Ph\u1ea7n \u0102n"},addCommentByRecipe:{id:"addCommentByRecipe",name:"Th\xeam Ghi Ch\xfa Cho B\u1ebfp"},addCommentByShift:{id:"addCommentByShift",name:"Th\xeam Ghi Ch\xfa Cho T\u1eebng Ca"},openChiPhiCoDinhModal:{id:"openChiPhiCoDinhModal",name:"Chi Ph\xed C\u1ed1 \u0110\u1ecbnh"},addNgayCong:{id:"addNgayCong",name:"Th\xeam ng\xe0y c\xf4ng"},tongHopLuong:{id:"tongHopLuong",name:"T\u1ed5ng h\u1ee3p l\u01b0\u01a1ng"},confirmSave:{id:"confirmSave",name:"X\xe1c nh\u1eadn l\u01b0u"},addNhanVienTangCa:{id:"addNhanVienTangCa",name:"Th\xeam Nh\xe2n Vi\xean T\u0103ng Ca"},viewChiTietChamCong:{id:"viewChiTietChamCong",name:"Xem Chi Ti\u1ebft Ch\u1ea5m C\xf4ng"}}},957:function(e,n,t){"use strict";var a=t(3),o=t(49),i=t(50),c=t(83),l=t(82),r=(t(0),t(42)),d=t(84),u=(t(319),t(115)),s=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,t),(e=n.call(this,{},{},{})).canTinId=a.canTinId,e.shiftArray=Object(r.isArray)(a.shiftArray)?a.shiftArray:[],e.shiftArrayDuTru=Object(r.isArray)(a.shiftArrayDuTru)?a.shiftArrayDuTru:[],e.caBangCaFields=Object(r.isArray)(a.caBangCaFields)?a.caBangCaFields:[],e.exportDuTru="function"===typeof a.exportDuTru?a.exportDuTru:r.noop,e.mealPrice=0,e.chiPhiCoDinh=[],e}return Object(i.a)(t,null,[{key:"getSoMonWithConditon",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.dayDuTruData,o=t.dayThucDonData,i=t.condition;if(i){var c,l=(null===e||void 0===e||null===(c=e[n])||void 0===c?void 0:c.values)||[],r=l.reduce((function(e,n){var t,c,l,r=null===o||void 0===o||null===(t=o["".concat(n)])||void 0===t?void 0:t.recipeId;if(!r)return e;var d=((null===a||void 0===a||null===(c=a[n])||void 0===c?void 0:c.soPhanAn)||0)+((null===a||void 0===a||null===(l=a[n])||void 0===l?void 0:l.soPhanThem)||0);return r.indexOf(i)>-1?e+d:e}),0);return r}}},{key:"getSoMon",value:function(e,n){var t,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.dayDuTruData,i=(null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.values)||[],c=i.reduce((function(e,n){var t,a;return e+(((null===o||void 0===o||null===(t=o[n])||void 0===t?void 0:t.soPhanAn)||0)+((null===o||void 0===o||null===(a=o[n])||void 0===a?void 0:a.soPhanThem)||0))}),0);return c}},{key:"getSoMonMan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monManConfig.id,o=t.getSoMon(e,a,n),i=n.soMonMan,c=void 0===i?2:i;return Math.round(o/c)}},{key:"getSoMonMan_CoCanh",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.monManConfig.id,i=t.getSoMonWithConditon(e,o,Object(a.a)(Object(a.a)({},n),{},{condition:"canh"}));return i}},{key:"getSoMonCT_CoCom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.monCTConfig.id,i=t.getSoMonWithConditon(e,o,Object(a.a)(Object(a.a)({},n),{},{condition:"c\u01a1m"}));return i}},{key:"getSoMonNuocChay",value:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.dayDuTruData,o=t.dayThucDonData,i=t.recipeDatas,c=u.b.vegConfig.id,l=(null===e||void 0===e||null===(n=e[c])||void 0===n?void 0:n.values)||[],r=l.reduce((function(e,n){var t,c,l,r,d=null===o||void 0===o||null===(t=o["".concat(n)])||void 0===t?void 0:t.recipeId;if(!d)return e;var u="M\xf3n n\u01b0\u1edbc chay"===(null===i||void 0===i||null===(c=i[d])||void 0===c?void 0:c.categoryRecipe),s=(null===a||void 0===a||null===(l=a[n])||void 0===l?void 0:l.soPhanAn)||0,h=(null===a||void 0===a||null===(r=a[n])||void 0===r?void 0:r.soPhanThem)||0;return u?e+(s+h):e}),0);return r}},{key:"getSoMonChay",value:function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.vegConfig.id,i=t.getSoMon(e,o,a),c=(null===e||void 0===e||null===(n=e[o])||void 0===n?void 0:n.values)||[],l=1===c.length?1:2;return Math.round(i/l)}},{key:"getSoMonCT",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monCTConfig.id,o=t.getSoMon(e,a,n);return Math.round(o)}},{key:"getSoMonNuoc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monNuocConfig.id,o=t.getSoMon(e,a,n);return Math.round(o)}},{key:"getSoMonXao",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n);return a+o}},{key:"getSoMonCanh",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n),i=0,c=0,l=a+o-i+c;return l}},{key:"getSoMonTrangMieng",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoTongPhan(e,n);return Math.round(a)}},{key:"getSoTongPhan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n),i=t.getSoMonNuoc(e,n),c=t.getSoMonCT(e,n);return a+o+i+c}}]),t}(d.a);n.a=s},985:function(e,n,t){"use strict";var a=t(14),o=t(49),i=t(50),c=t(83),l=t(82),r=t(0),d=t.n(r),u=t(957),s=t(10),h=t(943),v=t(692),m=t(697),f=t(698),g=t(436),b=t(320),C=t(300),p=v.a.TextArea,I={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:130,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(null===o||void 0===o?void 0:o.recipeKinds)||{};return d.a.createElement("strong",{className:"ml-2",style:{color:"blue"}},(null===i||void 0===i||null===(a=i[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"name",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:130,render:function(e){return d.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:190,render:function(e,n,t,a){var o=a.shiftId,i=a.coSoId,c=a.customerId,l=a.dayId,r=a.history,u=a.customerGroupId,s=a.isView,v=e,m=n.id;return v?d.a.createElement("div",{style:{color:"#1012ff"},className:"hoverClass font-weight-bold",onClick:function(){if(s)return null;var e=[[h.b.MODAL_ID,h.a.editRecipe.id],[h.b.COSO_ID,i],[h.b.CUSTOMER_ID,c],[h.b.CUSTOMER_GROUP_ID,u],[h.b.RECIPE_ID,v]];Object(C.d)(r,e)}},v):d.a.createElement("div",{className:"hoverClass",onClick:function(){if(s)return null;var e=[[h.b.MODAL_ID,h.a.selectRecipe.id],[h.b.SHIFT_ID,o],[h.b.KIND_ID,m],[h.b.DAY_ID,l],[h.b.RECIPE_ID,v]];Object(C.d)(r,e)}},"--")}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:80,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.giaPhanAn,i=d.a.createElement("strong",{className:"text-danger float-right"},d.a.createElement("sub",null,Object(s.f)(e,o),"%")),c=d.a.createElement(m.a,null,d.a.createElement(f.a,{sm:24}," ",i));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"center",width:80,render:function(e,n,t,a){var o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u="soPhanThem",s=n.id;return o.shiftId!==c||o.type!==u||r?d.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){return i({shiftId:c,type:u,recipeKindId:s})}},e||"--"):d.a.createElement(g.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===s,size:"small",step:5,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);l(n,{type:u,recipeKindId:s})}})}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",align:"center",className:"text-small",width:70,render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u="soPhanAn",s=n.id,h=n.loaiMonId,v=new b.a;return v.checkNotAddSoPhanAn(h)?e||"":o.shiftId!==c||o.type!==u||r?d.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){i({shiftId:c,type:u,recipeKindId:s})}},e||"--"):d.a.createElement(g.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===s,size:"small",min:0,step:10,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);l(n,{type:u,recipeKindId:s})}})}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"right",className:"text-small",width:90,render:function(e){return e?Object(s.b)(e):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",width:230,className:"text-small",render:function(e,n,t,a){var o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u=n.id;return o.shiftId!==c||"ghiChu"!==o.type||r?d.a.createElement("div",{className:"hoverClass",onClick:function(){return i({shiftId:c,recipeKindId:u,type:"ghiChu"})}},e||"--"):d.a.createElement(p,{rows:2,tabIndex:t+1,autoFocus:u===o.recipeKindId,size:"small",defaultValue:e||"",style:{width:"100%"},onBlur:function(e){var n=e.target.value;l(n,{type:"ghiChu",recipeKindId:u})}})}}},O=t(65),y=t.n(O),M=(t(835),t(48)),D=t(42),T=t(301),E=t(704),P=Object(r.memo)((function(e){var n,t,a,o,i,c=e.history,l=e.cellId,r=e.isMonPhu,u=e.dayId,v=e.loaiMonId,m=e.onDelete,f=e.visibleCost,g=e.shiftData,b=e.isView,p=e.isAfter,I=Object(E.a)(),O=Object(E.b)((function(e){return e.nguyenLieu})).nguyenLieus,y=Object(E.b)((function(e){return e.recipe})).ingreRecipeData,M=Object(E.b)((function(e){return e.thucDonDuTruSetting})).nhomGiaMonAnData,D=Object(E.b)((function(e){return e.thucDonDuTru})).thucDonDuTruWeek,P=null===M||void 0===M?void 0:M.giaPhanAn,j=null===g||void 0===g?void 0:g.id,N=null===D||void 0===D||null===(n=D[j])||void 0===n||null===(t=n.thucDons)||void 0===t||null===(a=t[u])||void 0===a||null===(o=a.kindIds)||void 0===o||null===(i=o["".concat(v)])||void 0===i?void 0:i.recipeId,S=function(e){e.stopPropagation(),window.confirm("X\xe1c nh\u1eadn x\xf3a ".concat(N))&&m(v,u)},w=d.a.useCallback((function(){var e=(null===y||void 0===y?void 0:y[N])||[];if(0===e.length||!f)return null;var n={nguyenLieus:e},t=I(Object(T.d)(n));return d.a.createElement("span",{className:"cost-style"},"(".concat(Object(s.f)(t,P),"%)"))}),[N,y,P,O,f]);return d.a.createElement("div",{id:l,className:["recipe-style",N?"":"text-center"].join(" "),style:{overflowY:"auto",fontSize:"14px"},onClick:function(){if(p||b)return null;var e=[[h.b.MODAL_ID,h.a.selectRecipe.id],[h.b.SHIFT_ID,j],[h.b.KIND_ID,v],[h.b.DAY_ID,u],[h.b.IS_MON_PHU,r],[h.b.RECIPE_ID,N]];Object(C.d)(c,e)}},w()," ",N||(N?d.a.createElement("span",{className:"text-black-50"},"Thi\u1ebfu ".concat(N)):p?"":"--")," ",b||p?null:N&&d.a.createElement("div",{className:"delete-icon",onClick:S},d.a.createElement("i",{className:"fa fa-close"})))}));P.defaultProps={onDelete:D.noop,visibleCost:!0};var j=Object(M.o)(P),N="Admin",S=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).tableColumns=[I.name],a.duTruItemColumns=[I.loaiMon,I.tenMon,I.giaMon,I.soPhanThem,I.soPhanAn,I.thanhTien,I.ghiChu],a}return Object(i.a)(t,[{key:"getTableColumns",value:function(e){var n=this,t=e.isView,o=e.yearId,i=e.weekId,c=e.onDelete,l=e.visibleCost,r=e.shiftData;if(!i||!o)return[];var u=this.tableColumns.map((function(t){return n.getGeneralFields(t,e)})),h=Array(7).fill(1).reduce((function(e,n,u){var h=n+u,v=Object(s.h)()===N,m=y()(o,"YYYY").week(i).day(n+u),f=m.format("dddd"),g=m.format("DD/MM"),b=y()().format("DD-MM-YYYY")===m.format("DD-MM-YYYY"),C=y()().subtract(1,"day").isAfter(m),p=b?{border:"1px solid lightblue"}:{};v&&(C=!1);var I={id:h,name:"".concat(f," (").concat(g,")"),width:160,align:"center",render:function(e,n,a){var o=n.id,i=n.isMonPhu,u="shift".concat("-",n.id,"-").concat(h);return d.a.createElement("div",{style:p},d.a.createElement(j,{shiftData:r,visibleCost:l,isView:t,isMonPhu:i,cellId:u,index:a,dayId:"".concat(f).toLowerCase(),isAfter:C,loaiMonId:o,onDelete:c}))}};return[].concat(Object(a.a)(e),[I])}),[]).map((function(t){return n.getGeneralFields(t,e)}));return u=[].concat(Object(a.a)(u),Object(a.a)(h))}},{key:"getDuTruItemColumns",value:function(e){var n=this;return this.duTruItemColumns.map((function(t){return n.getGeneralFields(t,e)}))}}]),t}(u.a);n.a=S}}]);